<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>JNU-IoT / Visualization</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.contextMenu.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.contextMenu.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.ui.position.js"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript" src="network.js"></script>
    <script type="text/javascript" src="net.js"></script>
    <style>
      #x{position:relative;}
      #mynetwork{position:absolute;}
    </style>
  </head>
  <body>
    <div id="main">JNU-IoT / Visualization</div>
    <div id="mOver1" onmouseover="mOver(this)" onmouseout="mOut(this)">프로젝트 참여자</div>
    <div class="wrapper">
      <div id="x" class="item0">
        <div id="mynetwork" align="center"></div></div>
      <div class="item1">패널1</div>
      <div class="item2">패널2</div>
      <div class="item3">알람1</div>
      <div class="item4">알람2</div>
    </div>
<script>
$(document).on('mouseenter', "#left1", function(){
    $.contextMenu({
      selector: '#left1',
      trigger: 'left',
      callback: function(key, options) {//지역 생성
      if(key =="create"){
        var myWindow = window.open("open1.html", "myWindow",  "width=620,height=160,top=50"); //지역생성팝업창.
      }
      else if(key =="delete"){//지역 삭제
        var text = prompt("지역 이름을 입력하시오 : ","ex)JNU");
        if(text==null){
          alert("취소하셨습니다.");
        }else{
          var r = confirm("정말로 삭제하시겠습니까 ? ");
        }
        if(r == true){
           $.post("http://192.168.56.1:3000/deleteNode/",{
       "NodeName" : text},function(data,status){
              if(data.success==1){
                alert(text + " 지역이(가) 제거되었습니다.");
                window.location.reload();
              }
              else {
                alert(text + " 지역이(가) 목록에 없습니다.");
              }
            })
        }
        else{
          alert("취소 버튼을 누르셨습니다.");
        }
      }
    },
    items: {
        "create": {name: "지역 추가", icon: "edit"}
    }
  });
});
$(document).on('mouseenter', "#left2", function(){
    $.contextMenu({
      selector: '#left2',
      trigger: 'left',
      callback: function(key, options) {//지역 생성
      if(key =="fold1-key3"){
        var myWindow = window.open("open2.html", "myWindow",  "width=620,height=160,top=50"); //지역생성팝업창.
      }
      else if(key =="delete"){//지역 삭제
        var text = prompt("지역 이름을 입력하시오 : ","ex)JNU");
        if(text==null){
          alert("취소하셨습니다.");
        }else{
          var r = confirm("정말로 삭제하시겠습니까 ? ");
        }
        if(r == true){
           $.post("http://192.168.56.1:3000/deleteNode/",{
       "NodeName" : text},function(data,status){
              if(data.success==1){
                alert(text + " 지역이(가) 제거되었습니다.");
                window.location.reload();
              }
              else {
                alert(text + " 지역이(가) 목록에 없습니다.");
              }
            })
        }
      }
    },
    items: {
      "fold1": {
        "name": "센서 추가",
        "items": {
          "fold1-key1": {"name": "ESP32"},
          "fold1-key2": {"name": "Arduino"},
          "fold1-key3": {
            "name": "Camera",
            "items":{
              "fold2-key1":{
                name : "URL",
                type : 'text'
              },
              sep1:"--------",
              select:{
                name : "Select",
                type : 'select',
                options:{1:'RTSP',2:"RTMP"}
              },
              sep2:"--------",
              key:{
                name:"something clickable",
                callback: $.noop
              }
            }
          }
        }
      },
      "delete": {name: "지역 삭제"}
    }
  });
});
function mOver(obj) {obj.innerHTML = "염성웅 박지연 최승진"}
function mOut(obj) {obj.innerHTML = "프로젝트 참여자"}
</script>
  </body>
</html>
